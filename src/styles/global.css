import React, { useState, useRef } from 'react';

const SketchPad = () => {
   const [isDrawing, setIsDrawing] = useState(false);
   const canvasRef = useRef(null);

   const startDrawing = (event) => {
      setIsDrawing(true);
      const canvas = canvasRef.current;
      const context = canvas.getContext('2d');
      const { offsetX, offsetY } = event.nativeEvent;
      context.beginPath();
      context.moveTo(offsetX, offsetY);
   }

   const draw = (event) => {
      if (!isDrawing) return;
      const canvas = canvasRef.current;
      const context = canvas.getContext('2d');
      const { offsetX, offsetY } = event.nativeEvent;
      context.lineTo(offsetX, offsetY);
      context.stroke();
   }

   const stopDrawing = () => {
      setIsDrawing(false);
   }

   const clearCanvas = () => {
      const canvas = canvasRef.current;
      const context = canvas.getContext('2d');
      context.clearRect(0, 0, canvas.width, canvas.height);
   }

   const generateCode = () => {
      const canvas = canvasRef.current;
      const context = canvas.getContext('2d');
      // Get the image data from the canvas
      const imageData = context.getImageData(0, 0, canvas.width, canvas.height);

      // Generate code based on the image data

      // Return the generated code
   }

   return (
      <div className="container">
         <canvas
            ref={canvasRef}
            className="sketchpad"
            onMouseDown={startDrawing}
            onMouseMove={draw}
            onMouseUp={stopDrawing}
            onMouseLeave={stopDrawing}
         ></canvas>
         <button onClick={clearCanvas}>Clear</button>
         <button onClick={generateCode}>Generate Code</button>
      </div>
   );
}

export default SketchPad;